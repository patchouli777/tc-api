basePath: /api
definitions:
  main_internal_lib_handler.ErrorResponse:
    properties:
      error:
        type: string
      success:
        type: boolean
    type: object
  main_internal_lib_null.Array-int32:
    properties:
      explicit:
        type: boolean
      isNull:
        type: boolean
      value:
        items:
          format: int32
          type: integer
        type: array
    type: object
  main_internal_lib_null.Bool:
    properties:
      explicit:
        type: boolean
      isNull:
        type: boolean
      value:
        type: boolean
    type: object
  main_internal_lib_null.Int:
    properties:
      explicit:
        type: boolean
      isNull:
        type: boolean
      value:
        type: integer
    type: object
  main_internal_lib_null.String:
    properties:
      explicit:
        type: boolean
      isNull:
        type: boolean
      value:
        type: string
    type: object
  main_pkg_api_auth.LoginRequest:
    properties:
      password:
        type: string
      username:
        type: string
    type: object
  main_pkg_api_auth.LoginResponse:
    properties:
      access:
        type: string
    type: object
  main_pkg_api_auth.RegisterRequest:
    properties:
      email:
        type: string
      password:
        type: string
      username:
        type: string
    type: object
  main_pkg_api_auth.RegisterResponse:
    properties:
      access:
        type: string
    type: object
  main_pkg_api_category.Category:
    properties:
      id:
        type: integer
      is_safe:
        type: boolean
      link:
        type: string
      name:
        type: string
      tags:
        items:
          $ref: '#/definitions/main_pkg_api_category.CategoryTag'
        type: array
      thumbnail:
        type: string
      viewers:
        type: integer
    type: object
  main_pkg_api_category.CategoryTag:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  main_pkg_api_category.GetResponse:
    properties:
      category:
        $ref: '#/definitions/main_pkg_api_category.Category'
    type: object
  main_pkg_api_category.ListResponse:
    properties:
      categories:
        items:
          $ref: '#/definitions/main_pkg_api_category.ListResponseItem'
        type: array
    type: object
  main_pkg_api_category.ListResponseItem:
    properties:
      is_safe:
        type: boolean
      link:
        type: string
      name:
        type: string
      tags:
        items:
          $ref: '#/definitions/main_pkg_api_category.CategoryTag'
        type: array
      thumbnail:
        type: string
      viewers:
        type: integer
    type: object
  main_pkg_api_category.PatchRequest:
    properties:
      is_safe:
        $ref: '#/definitions/main_internal_lib_null.Bool'
      link:
        $ref: '#/definitions/main_internal_lib_null.String'
      name:
        $ref: '#/definitions/main_internal_lib_null.String'
      tags:
        $ref: '#/definitions/main_internal_lib_null.Array-int32'
      thumbnail:
        $ref: '#/definitions/main_internal_lib_null.String'
    type: object
  main_pkg_api_category.PostRequest:
    properties:
      is_safe:
        type: boolean
      link:
        type: string
      name:
        type: string
      tags:
        items:
          type: integer
        type: array
      thumbnail:
        type: string
    type: object
  main_pkg_api_channel.GetResponse:
    properties:
      background:
        type: string
      description:
        type: string
      first_livestream:
        type: string
      id:
        type: integer
      is_banned:
        type: boolean
      is_partner:
        type: boolean
      last_livestream:
        type: string
      links:
        items:
          $ref: '#/definitions/main_pkg_api_channel.Link'
        type: array
      name:
        type: string
      tags:
        items:
          $ref: '#/definitions/main_pkg_api_channel.Tag'
        type: array
    type: object
  main_pkg_api_channel.Link:
    properties:
      id:
        type: integer
      link:
        type: string
      name:
        type: string
    type: object
  main_pkg_api_channel.Tag:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  main_pkg_api_follow.DeleteRequest:
    properties:
      unfollow:
        type: string
    type: object
  main_pkg_api_follow.GetResponse:
    properties:
      is_follower:
        type: boolean
    type: object
  main_pkg_api_follow.ListExtendedResponse:
    properties:
      follow_list:
        items:
          $ref: '#/definitions/main_pkg_api_follow.ListExtendedResponseItem'
        type: array
    type: object
  main_pkg_api_follow.ListExtendedResponseItem:
    properties:
      avatar:
        type: string
      category:
        type: string
      is_live:
        type: boolean
      name:
        type: string
      title:
        type: string
      viewers:
        type: integer
    type: object
  main_pkg_api_follow.ListResponse:
    properties:
      follow_list:
        items:
          $ref: '#/definitions/main_pkg_api_follow.ListResponseItem'
        type: array
    type: object
  main_pkg_api_follow.ListResponseItem:
    properties:
      avatar:
        type: string
      name:
        type: string
    type: object
  main_pkg_api_follow.PostRequest:
    properties:
      follow:
        type: string
    type: object
  main_pkg_api_livestream.GetResponse:
    properties:
      avatar:
        type: string
      category:
        $ref: '#/definitions/main_pkg_api_livestream.LivestreamCategory'
      id:
        type: integer
      is_following:
        type: boolean
      is_live:
        type: boolean
      is_multistream:
        type: boolean
      is_subscriber:
        type: boolean
      started_at:
        type: integer
      thumbnail:
        type: string
      title:
        type: string
      username:
        type: string
      viewers:
        type: integer
    type: object
  main_pkg_api_livestream.ListResponse:
    properties:
      livestreams:
        items:
          $ref: '#/definitions/main_pkg_api_livestream.ListResponseItem'
        type: array
    type: object
  main_pkg_api_livestream.ListResponseItem:
    properties:
      avatar:
        type: string
      category:
        $ref: '#/definitions/main_pkg_api_livestream.LivestreamCategory'
      started_at:
        type: integer
      thumbnail:
        type: string
      title:
        type: string
      username:
        type: string
      viewers:
        type: integer
    type: object
  main_pkg_api_livestream.LivestreamCategory:
    properties:
      id:
        type: integer
      link:
        type: string
      name:
        type: string
    type: object
  main_pkg_api_livestream.PatchRequest:
    properties:
      category_id:
        $ref: '#/definitions/main_internal_lib_null.Int'
      title:
        allOf:
        - $ref: '#/definitions/main_internal_lib_null.String'
        description: Channel      null.String `json:"channel"`
    type: object
  main_pkg_api_livestream.PatchResponse:
    properties:
      status:
        type: boolean
    type: object
  main_pkg_api_user.DeleteRequest:
    properties:
      id:
        type: integer
    type: object
  main_pkg_api_user.GetResponse:
    properties:
      avatar:
        type: string
      first_livestream:
        type: string
      id:
        type: integer
      is_banned:
        type: boolean
      is_live:
        type: boolean
      is_partner:
        type: boolean
      last_livestream:
        type: string
      name:
        type: string
    type: object
  main_pkg_api_user.PatchRequest:
    properties:
      avatar:
        $ref: '#/definitions/main_internal_lib_null.String'
      is_banned:
        $ref: '#/definitions/main_internal_lib_null.Bool'
      is_partner:
        $ref: '#/definitions/main_internal_lib_null.Bool'
      name:
        $ref: '#/definitions/main_internal_lib_null.String'
      password:
        $ref: '#/definitions/main_internal_lib_null.String'
    type: object
  main_pkg_api_user.PostRequest:
    properties:
      avatar:
        type: string
      name:
        type: string
      password:
        type: string
    type: object
externalDocs:
  description: OpenAPI
  url: https://swagger.io/resources/open-api/
host: localhost:8090
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: desc
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Swagger Example API
  version: "1.0"
paths:
  /categories:
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of categories with optional sorting
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: string
      - description: 'Items per page (default: 10)'
        in: query
        name: count
        type: string
      - description: 'Sort order (asc, desc) (default: desc)'
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main_pkg_api_category.ListResponse'
        "400":
          description: Invalid page, count, or sort parameter
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: List categories
      tags:
      - Categories
    post:
      consumes:
      - application/json
      description: Create a new category (staff only)
      parameters:
      - description: Bearer token
        format: jwt
        in: header
        name: auth
        required: true
        type: string
      - description: Category data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_category.PostRequest'
      produces:
      - application/json
      responses:
        "204":
          description: Category created successfully
        "400":
          description: Invalid auth, insufficient permissions, or malformed request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error or category already exists
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create new category
      tags:
      - Categories
  /categories/{identifier}:
    delete:
      consumes:
      - application/json
      description: Delete a category by ID or link (staff only)
      parameters:
      - description: Category ID or link
        in: path
        name: identifier
        required: true
        type: string
      - description: Bearer token
        format: jwt
        in: header
        name: auth
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Category deleted successfully
        "400":
          description: Invalid or insufficient auth permissions
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete category
      tags:
      - Categories
    get:
      consumes:
      - application/json
      description: Retrieve a category using either its numeric ID or string link
        (e.g. "path-of-exile")
      parameters:
      - description: Category ID or link
        in: path
        name: identifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main_pkg_api_category.GetResponse'
        "404":
          description: Category not found
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Get category by ID or link
      tags:
      - Categories
    patch:
      consumes:
      - application/json
      description: Partially update a category by ID or link (staff only)
      parameters:
      - description: Category ID or link
        in: path
        name: identifier
        required: true
        type: string
      - description: Bearer token
        format: jwt
        in: header
        name: auth
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_category.PatchRequest'
      produces:
      - application/json
      responses:
        "204":
          description: Category updated successfully
        "400":
          description: Invalid auth, insufficient permissions, or malformed request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update category
      tags:
      - Categories
  /channels/{channel}:
    get:
      consumes:
      - application/json
      description: Retrieve detailed information about a specific channel
      parameters:
      - description: Channel identifier
        in: path
        name: channel
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Channel details
          schema:
            $ref: '#/definitions/main_pkg_api_channel.GetResponse'
        "400":
          description: Missing channel identifier
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Get channel details
      tags:
      - Channels
  /follows:
    get:
      description: Get list of users that follower is following (basic or extended)
      parameters:
      - description: Username to get follow list for
        in: query
        name: follower
        required: true
        type: string
      - description: true for extended info, false/default for basic
        in: query
        name: extended
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Extended follow list
          schema:
            $ref: '#/definitions/main_pkg_api_follow.ListExtendedResponse'
        "400":
          description: Missing follower parameter
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: List followers or following
      tags:
      - Follows
  /follows/{username}:
    delete:
      consumes:
      - application/json
      description: Unfollow a specific user
      parameters:
      - description: Authenticated user's username
        in: path
        name: username
        required: true
        type: string
      - description: User to unfollow
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_follow.DeleteRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "401":
          description: Unauthorized - invalid claims or identity mismatch
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Unfollow user
      tags:
      - Follows
    get:
      description: Check if one user follows another
      parameters:
      - description: Follower username
        in: path
        name: username
        required: true
        type: string
      - description: Followed username
        in: query
        name: followed
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Follow status
          schema:
            $ref: '#/definitions/main_pkg_api_follow.GetResponse'
        "400":
          description: Missing followed parameter
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Check follow status
      tags:
      - Follows
    post:
      consumes:
      - application/json
      description: Follow a user (or unfollow if already following)
      parameters:
      - description: Authenticated user's username
        in: path
        name: username
        required: true
        type: string
      - description: User to follow/unfollow
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_follow.PostRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "401":
          description: Unauthorized - invalid claims or identity mismatch
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Follow or unfollow user
      tags:
      - Follows
  /livestreams:
    get:
      description: Get paginated list of livestreams filtered by category
      parameters:
      - description: Category name
        in: query
        name: category
        type: string
      - description: Category identifier
        in: query
        minLength: 1
        name: categoryId
        type: string
      - default: 1
        description: Page number
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        maximum: 100
        minimum: 1
        name: count
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Paginated livestreams
          schema:
            $ref: '#/definitions/main_pkg_api_livestream.ListResponse'
        "400":
          description: Missing category, invalid page/count
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: List livestreams by category
      tags:
      - Livestreams
  /livestreams/{username}:
    get:
      description: Retrieve livestream information for a streamer
      parameters:
      - description: Streamer username
        in: path
        name: username
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Livestream data
          schema:
            $ref: '#/definitions/main_pkg_api_livestream.GetResponse'
        "404":
          description: Livestream not found
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Get livestream data
      tags:
      - Livestreams
    patch:
      consumes:
      - application/json
      description: Update livestream title and category (owner only)
      parameters:
      - description: Livestream owner username
        in: path
        name: username
        required: true
        type: string
      - description: Update data (title, categoryId)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_livestream.PatchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Update status
          schema:
            $ref: '#/definitions/main_pkg_api_livestream.PatchResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "401":
          description: Unauthorized - invalid claims or identity mismatch
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update livestream
      tags:
      - Livestreams
  /signin:
    post:
      consumes:
      - application/json
      description: Authenticate user and return access token
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Access token
          schema:
            $ref: '#/definitions/main_pkg_api_auth.LoginResponse'
        "400":
          description: Invalid request or credentials
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Sign in user
      tags:
      - Auth
  /signup:
    post:
      consumes:
      - application/json
      description: Register new user and return access token
      parameters:
      - description: Registration data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_auth.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Access token
          schema:
            $ref: '#/definitions/main_pkg_api_auth.RegisterResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "409":
          description: User already exists
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Sign up new user
      tags:
      - Auth
  /users:
    post:
      consumes:
      - application/json
      description: Register new user account
      parameters:
      - description: User creation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_user.PostRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid request, missing name/password, weak password
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "409":
          description: User already exists
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Create user account
      tags:
      - Users
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: Delete own user account (self only)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Delete confirmation
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_user.DeleteRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid ID, claims, identity mismatch, or request
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete user account
      tags:
      - Users
    get:
      description: Retrieve user profile information
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/main_pkg_api_user.GetResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: User not found or internal error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      summary: Get user by ID
      tags:
      - Users
    patch:
      consumes:
      - application/json
      description: Update user profile (self or staff only)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Update data (name, password, avatar, banned, partner)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/main_pkg_api_user.PatchRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid ID, claims, identity mismatch, request, or weak password
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "409":
          description: Name already exists
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/main_internal_lib_handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user
      tags:
      - Users
securityDefinitions:
  BasicAuth:
    type: basic
swagger: "2.0"
