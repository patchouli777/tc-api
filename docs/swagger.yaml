basePath: /api
definitions:
  auth.LoginRequest:
    properties:
      password:
        type: string
      username:
        type: string
    type: object
  auth.LoginResponse:
    properties:
      access:
        type: string
    type: object
  auth.RegisterRequest:
    properties:
      email:
        type: string
      password:
        type: string
      username:
        type: string
    type: object
  auth.RegisterResponse:
    properties:
      access:
        type: string
    type: object
  category.Category:
    properties:
      id:
        type: integer
      isSafe:
        type: boolean
      link:
        type: string
      name:
        type: string
      thumbnail:
        type: string
      viewers:
        type: integer
    type: object
  category.GetResponse:
    properties:
      category:
        $ref: '#/definitions/category.Category'
    type: object
  category.ListResponse:
    properties:
      categories:
        items:
          $ref: '#/definitions/category.ListResponseItem'
        type: array
    type: object
  category.ListResponseItem:
    properties:
      is_safe:
        type: boolean
      link:
        type: string
      name:
        type: string
      tags:
        items:
          type: string
        type: array
      thumbnail:
        type: string
      viewers:
        type: integer
    type: object
  category.PatchRequest:
    properties:
      is_safe:
        type: boolean
      link:
        type: string
      name:
        type: string
      tags:
        items:
          type: string
        type: array
      thumbnail:
        type: string
    type: object
  category.PostRequest:
    properties:
      is_safe:
        type: boolean
      link:
        type: string
      name:
        type: string
      tags:
        items:
          type: string
        type: array
      thumbnail:
        type: string
    type: object
  er.RequestError:
    properties:
      error:
        type: string
      success:
        type: boolean
    type: object
  follow.GetResponse:
    properties:
      is_follower:
        type: boolean
    type: object
  follow.ListExtendedResponse:
    properties:
      follow_list:
        items:
          $ref: '#/definitions/follow.ListExtendedResponseItem'
        type: array
    type: object
  follow.ListExtendedResponseItem:
    properties:
      avatar:
        type: string
      category:
        type: string
      is_live:
        type: boolean
      name:
        type: string
      title:
        type: string
      viewers:
        type: integer
    type: object
  follow.ListResponse:
    properties:
      follow_list:
        items:
          $ref: '#/definitions/follow.ListResponseItem'
        type: array
    type: object
  follow.ListResponseItem:
    properties:
      avatar:
        type: string
      name:
        type: string
    type: object
  livestream.DeleteResponse:
    properties:
      status:
        type: boolean
    type: object
  livestream.GetResponse:
    properties:
      avatar:
        type: string
      category:
        $ref: '#/definitions/livestream.LivestreamCategory'
      id:
        type: integer
      is_following:
        type: boolean
      is_live:
        type: boolean
      is_multistream:
        type: boolean
      is_subscriber:
        type: boolean
      started_at:
        type: integer
      thumbnail:
        type: string
      title:
        type: string
      username:
        type: string
      viewers:
        type: integer
    type: object
  livestream.ListResponse:
    properties:
      livestreams:
        items:
          $ref: '#/definitions/livestream.ListResponseItem'
        type: array
    type: object
  livestream.ListResponseItem:
    properties:
      avatar:
        type: string
      category:
        $ref: '#/definitions/livestream.LivestreamCategory'
      is_live:
        type: boolean
      is_multistream:
        type: boolean
      started_at:
        type: integer
      thumbnail:
        type: string
      title:
        type: string
      username:
        type: string
      viewers:
        type: integer
    type: object
  livestream.LivestreamCategory:
    properties:
      link:
        type: string
      name:
        type: string
    type: object
  livestream.PatchRequest:
    properties:
      category_link:
        type: string
      title:
        type: string
    type: object
  livestream.PatchResponse:
    properties:
      status:
        type: boolean
    type: object
  livestream.PostRequest:
    properties:
      category_link:
        type: string
      title:
        type: string
    type: object
  livestream.PostResponse:
    properties:
      category:
        type: string
      started_at:
        type: integer
      title:
        type: string
      username:
        type: string
      viewers:
        type: integer
    type: object
  user.DeleteRequest:
    properties:
      user_id:
        type: integer
    type: object
  user.GetResponse:
    properties:
      avatar:
        type: string
      first_livestream:
        type: string
      id:
        type: integer
      is_banned:
        type: boolean
      is_partner:
        type: boolean
      last_livestream:
        type: string
      name:
        type: string
    type: object
  user.GetResponseNotFound:
    properties:
      result:
        type: string
    type: object
  user.ListRequest:
    properties:
      count:
        type: integer
      first_livestream:
        type: string
      last_livestream:
        type: string
      page:
        type: integer
      registration:
        type: string
      sort:
        type: string
    type: object
  user.ListResponse:
    properties:
      users:
        items:
          $ref: '#/definitions/user.ListResponseItem'
        type: array
    type: object
  user.ListResponseItem:
    properties:
      avatar:
        type: string
      description:
        type: string
      firstLivestream:
        type: string
      id:
        type: integer
      isBanned:
        type: boolean
      isPartner:
        type: boolean
      lastLivestream:
        type: string
      name:
        type: string
    type: object
  user.PatchRequest:
    properties:
      avatar:
        type: string
      is_banned:
        type: boolean
      is_partner:
        type: boolean
      last_livestream:
        type: string
      name:
        type: string
      password:
        type: string
    type: object
  user.PostRequest:
    properties:
      avatar:
        type: string
      name:
        type: string
      password:
        type: string
    type: object
externalDocs:
  description: OpenAPI
  url: https://swagger.io/resources/open-api/
host: localhost:8090
info:
  contact: {}
  description: "yes"
  termsOfService: "no"
  title: twitchclone api
  version: "1.0"
paths:
  /categories:
    get:
      consumes:
      - application/json
      description: Retrieves a list of categories with optional pagination and sorting
        parameters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Number of items per page
        in: query
        name: count
        type: integer
      - default: desc
        description: Sort order (asc or desc)
        enum:
        - asc
        - desc
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of categories
          schema:
            $ref: '#/definitions/category.ListResponse'
        "400":
          description: Invalid query parameter
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal server error while fetching categories
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: List categories with pagination and sorting
      tags:
      - category
    post:
      consumes:
      - application/json
      description: Creates a new category with the given details
      parameters:
      - description: Category creation request body
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/category.PostRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content - category created successfully
        "400":
          description: 'Bad Request: invalid data'
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: 'Internal Server Error: failed to add category'
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Add a new category
      tags:
      - category
  /categories/{categoryIdentifier}:
    delete:
      consumes:
      - application/json
      description: Deletes a category entity identified by either its numeric ID or
        unique link (slug).
      parameters:
      - description: Category identifier (either numeric ID or unique link)
        in: path
        name: categoryIdentifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content - category delted successfully
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Delete category by ID or link
      tags:
      - category
    get:
      consumes:
      - application/json
      description: Retrieves detailed information about a category by either its numeric
        ID or a unique link (slug).
      parameters:
      - description: Category identifier (either numeric ID or unique link)
        in: path
        name: categoryIdentifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Category found successfully
          schema:
            $ref: '#/definitions/category.GetResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Get category by ID or link
      tags:
      - category
    patch:
      consumes:
      - application/json
      description: Partially updates a category entity using provided fields, identified
        by either numeric ID or unique link (slug).
      parameters:
      - description: Category identifier (either numeric ID or unique link)
        in: path
        name: categoryIdentifier
        required: true
        type: string
      - description: Fields to update in the category
        in: body
        name: patchRequest
        required: true
        schema:
          $ref: '#/definitions/category.PatchRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content - category updated successfully
        "400":
          description: Invalid request data
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Update category by ID or link
      tags:
      - category
  /follow/{username}:
    delete:
      consumes:
      - application/json
      description: Allows the authenticated user to unfollow another user by username
      parameters:
      - description: Username of the user to unfollow
        in: path
        name: username
        required: true
        type: string
      - description: Username of the user to be unfollowed
        in: query
        name: unfollowing
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Unfollow successful
          schema:
            type: string
        "400":
          description: 'Bad Request: user mismatch'
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: 'Internal Server Error: failed to unfollow user'
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Unfollow a user
      tags:
      - follow
    get:
      description: Returns json response
      parameters:
      - description: follower
        in: path
        name: username
        required: true
        type: string
      - description: followed
        in: query
        name: followed
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/follow.GetResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: is user a follower of other user
      tags:
      - follow
    post:
      consumes:
      - application/json
      description: Allows the authenticated user to follow another user by username
      parameters:
      - description: Username of the user to follow
        in: path
        name: username
        required: true
        type: string
      - description: Username of the user to be followed
        in: query
        name: following
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Follow successful
          schema:
            type: string
        "400":
          description: 'Bad Request: user mismatch'
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: 'Internal Server Error: failed to follow user'
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Follow a user
      tags:
      - follow
  /follows:
    get:
      consumes:
      - application/json
      description: Lists the followees of a given follower username. If `extended=true`
        is passed as a query parameter, returns detailed info per followee.
      parameters:
      - description: Follower username whose follow list is requested
        in: query
        name: follower
        required: true
        type: string
      - description: If set to 'true', returns extended follow list details
        in: query
        name: extended
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Extended follow list response
          schema:
            $ref: '#/definitions/follow.ListExtendedResponse'
        "400":
          description: 'Bad request: follower username is missing'
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal server error while retrieving follow list
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Retrieve follower's follow list
      tags:
      - follow
  /livestream/{username}:
    patch:
      consumes:
      - application/json
      description: Update livestream information like title and category for the authenticated
        user.
      parameters:
      - description: Username
        in: path
        name: username
        required: true
        type: string
      - description: Patch livestream request body
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/livestream.PatchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successful update response
          schema:
            $ref: '#/definitions/livestream.PatchResponse'
        "400":
          description: Bad request or unauthorized update attempt
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal server error updating livestream
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Update livestream data
      tags:
      - livestream
  /livestreams:
    get:
      consumes:
      - application/json
      description: Retrieves a paginated list of livestreams filtered by category
        or category ID.
      parameters:
      - description: Category name to filter by
        in: query
        name: category
        type: string
      - description: Category ID to filter by
        in: query
        name: categoryId
        type: string
      - default: 1
        description: Page number for pagination (default 1)
        in: query
        name: page
        type: integer
      - default: 10
        description: Number of results per page (default 10)
        in: query
        name: count
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Livestream list response
          schema:
            $ref: '#/definitions/livestream.ListResponse'
        "400":
          description: 'Bad request: missing or invalid parameters'
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: List livestreams by category or category ID
      tags:
      - livestream
  /livestreams/{username}:
    delete:
      consumes:
      - application/json
      description: Stops the livestream if the authenticated user matches the username
        in the path
      parameters:
      - description: Username
        in: path
        name: username
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/livestream.DeleteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/er.RequestError'
      security:
      - ApiKeyAuth: []
      summary: Stop a livestream for a user
      tags:
      - livestream
    get:
      consumes:
      - application/json
      description: Retrieves livestream information for the specified streamer username
      parameters:
      - description: Streamer Username
        in: path
        name: username
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/livestream.GetResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/er.RequestError'
      summary: Get livestream data by username
      tags:
      - livestream
    post:
      consumes:
      - application/json
      description: Starts a livestream if the authenticated user matches the username
        in the path
      parameters:
      - description: Username
        in: path
        name: username
        required: true
        type: string
      - description: Livestream start data
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/livestream.PostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/livestream.PostResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/er.RequestError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/er.RequestError'
      security:
      - ApiKeyAuth: []
      summary: Start a new livestream for a user
      tags:
      - livestream
  /login:
    post:
      consumes:
      - application/json
      description: Authenticate user and return access token (refresh token set as
        cookie)
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Access token returned
          schema:
            $ref: '#/definitions/auth.LoginResponse'
        "400":
          description: Invalid credentials or request data
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: User login
      tags:
      - auth
  /register:
    post:
      consumes:
      - application/json
      description: Register new user account and return access token (refresh token
        set as cookie)
      parameters:
      - description: Registration data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Access token returned
          schema:
            $ref: '#/definitions/auth.RegisterResponse'
        "400":
          description: Invalid request data
          schema:
            type: string
        "409":
          description: User already exists
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: User registration
      tags:
      - auth
  /users:
    get:
      consumes:
      - application/json
      description: List users with optional filters (staff only)
      parameters:
      - description: List filters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.ListRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.ListResponse'
        "400":
          description: Invalid claims or insufficient permissions
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: List all users
      tags:
      - users
    post:
      consumes:
      - application/json
      description: Create a new user account with name, password, and optional avatar
      parameters:
      - description: User creation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.PostRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid request data or missing fields
          schema:
            type: string
        "409":
          description: Username already exists
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Create new user
      tags:
      - users
  /users/{username}:
    delete:
      consumes:
      - application/json
      description: Delete authenticated user's account by providing user ID in request
        body
      parameters:
      - description: Username
        in: path
        name: username
        required: true
        type: string
      - description: User ID to delete
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.DeleteRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid claims, identity mismatch, or invalid request data
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Delete user account
      tags:
      - users
    get:
      consumes:
      - application/json
      description: Retrieve user information by username
      parameters:
      - description: Username
        in: path
        name: username
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.GetResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/user.GetResponseNotFound'
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Get user by username
      tags:
      - users
    patch:
      consumes:
      - application/json
      description: Update authenticated user's profile information
      parameters:
      - description: Username
        in: path
        name: username
        required: true
        type: string
      - description: User update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/user.PatchRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid claims, identity mismatch, or invalid request data
          schema:
            type: string
        "409":
          description: Username already exists
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - users
securityDefinitions:
  BasicAuth:
    type: basic
swagger: "2.0"
